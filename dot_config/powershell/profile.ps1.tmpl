# PowerShell profile extensions for dotfiles
# Source this file in your PowerShell profile:
#   . "$env:USERPROFILE\.config\powershell\profile.ps1"

# Add portable binaries to PATH (for portable mode without Scoop)
$LocalBin = Join-Path $env:USERPROFILE ".local\bin"
if (Test-Path $LocalBin) {
    if ($env:PATH -notlike "*$LocalBin*") {
        $env:PATH = "$LocalBin;$env:PATH"
    }
}

# Initialize starship prompt (if available)
if (Get-Command starship -ErrorAction SilentlyContinue) {
    $env:STARSHIP_CONFIG = Join-Path $env:USERPROFILE ".config\starship\config.toml"
    Invoke-Expression (&starship init powershell | Out-String)
}

# Initialize zoxide (if available)
if (Get-Command zoxide -ErrorAction SilentlyContinue) {
    Invoke-Expression (& zoxide init powershell | Out-String)
}

# Source dots.ps1 if it exists (dotfiles management functions)
$DotsScript = Join-Path $env:USERPROFILE ".config\powershell\dots.ps1"
if (Test-Path $DotsScript) {
    . $DotsScript
}
